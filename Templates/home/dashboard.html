<html>
<head>

  <title>
    Dashboard
  </title>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>
$.myjQuery = function(class_for_span, task_title,task_id) {
      $("#Tasks").append("<li><input class = 'status_of_task' type = 'checkbox' value = '" + task_id +
       "'>" + "<span class = "+class_for_span +">" + task_title+ "</span>");
  };

//calling myjQuery to add task to the page.
  function adding_span(class_for_span, task_title,task_id) {
    $.myjQuery(class_for_span, task_title,task_id);
  };

</script>
</head>
<body>
<div id = "container">
  <h1>
    Yo! Lets plan something.
  </h1>
  <div id ="scheduled_tasks">
    <h2>
      Scheduled Tasks
    </h2>
    {% if scheduled_tasks %}
    <ul id = "Tasks">
      {% for task in scheduled_tasks %}

        <script>
        var class_for_span = "task_";
        class_for_span += {{ task.id }};
        console.log(class_for_span);
        adding_span(class_for_span, "{{ task.task_title }}", {{ task.id }})
        </script>
      {% endfor %}
    </ul>
    {% else %}
      There is no Scheduled Task.
    {% endif %}
  </div>
</div>
<script>

//sending json object to update database
$(document).ready(function() {
$(".status_of_task").click(function () {
  console.log( $(this).is(":checked") );
  console.log( $(this).val());
  var task_id = $(this).val();
  var status = $(this).is(":checked");

  var obj = {'id':task_id,'status':status };
  console.log(obj);
  $.ajax({
       url: '/change_task_status/',
       data: obj,
       dataType: 'json',
       success: function (data) {
         console.log(data.data_saved);
         if (data.data_saved) {
           
         }
       }
     });

});
});
</script>
<script>

</script>

</body>
</html>
